

## 注解
### Swagger

| 注解               | 说明                                               |
|-------------------|--------------------------------------------------|
| @Api              | 用在类上，表示对类的说明，如 Controller，通过 tags 参数进行描述         |
| @ApiModel         | 用在类上，表示对类的说明，如 Entity、DTO、VO，通过 description 参数描述 |
| @ApiModelProperty | 用在属性上，描述属性信息，通过 value 参数描述                       |
| @ApiOperation     | 用在方法上，说明方法的用途、作用，如 Controller 的方法，通过 value 参数描述  |

## 需求分析
<details>
<summary>1. JWT令牌</summary>
令牌：用于合法用户发送请求，后端只相应合法令牌对应的请求

流程如下：
1. 用户登录（给后端发送账号密码），后端验证用户信息，生成令牌
2. 后端生成 JWT Token 将令牌返回给前端
3. 前端将令牌存储在本地，每次请求时将令牌放在请求头中，向后端发送请求
4. 后端进行拦截，验证令牌，如果合法则执行业务逻辑并返回数据，否则返回错误信息
</details>

<details>
<summary>2. 添加员工</summary>

1. 需求描述

| 字段   | 需求        |
|------|-----------|
| 账号   | 唯一        |
| 密码   | 默认123456  |
| 姓名   |           |
| 手机号  | 11位合法手机号  |
| 性别   | 男/女 二选一   |
| 身份证号 | 18位合法身份证号 |
2. 接口信息

（1）基本信息
- path：/admin/employee
- method：POST

（2）请求参数
- Headers

| 名称           | 参数值              | 是否必须 | 示例 | 备注 |
|--------------|------------------| ------ |----| --- |
| Content-Type | application/json | 是     |    |      |
- Body

| 名称      | 类型    | 是否必须  | 默认值 | 备注   | 其他信息 |
|----------|---------|-------|-----|------|------|
| id       | integer | 非必须   |     | 员工id |      |
| idNumber | string  | 必须    |     | 身份证  |   |
| name     | string  | 必须    |     | 姓名   |      |
| phone    | string  | 必须    |     | 手机号  |      |
| sex      | string  | 必须    |     | 性别   |      |
| username | string  | 必须    |     | 用户名  |      |

（3）返回数据

| 名称   | 类型      | 是否必须  | 默认值 | 备注   | 其他信息 |
|------|---------|-------|-----|------|------|
| code | integer | 必须   |     | 状态码  |      |
| data | object  | 非必须    |     | 返回数据 |   |
| msg  | string  | 非必须    |     | 错误信息 |      |

3. 错误处理

（1）插入重复字段

提取重复字段，构造msg，进行返回

（2）动态获取添加者的id：使用 ThreadLocal

ThreadLocal：为每个线程单独提供一份存储空间，每个线程都可以独立修改自己的副本，而不会影响其他线程的副本

因此，在拦截器拦截并判断令牌时，可以将用户id存储在ThreadLocal中，方便后续使用

常用方法：
- public void set (T value)：设置当前线程的线程局部变量的值 -- 加
- public T get ()：返回当前线程的线程局部变量的值  -- 获得
- public void remove ()：移除当前线程的线程局部变量的值  -- 删
</details>